## Cartridge configuration

This directory hosts user's configuration files that permit to override and
extend the default behaviour of the cartridge, in order to have complete
control on the produced Algolia records.

### Product records

You can:
- Override the definition of [existing attributes](https://www.algolia.com/doc/integration/salesforce-commerce-cloud-b2c/indexing/product-indexing/indexing-attributes/#configurable-attributes).
- Create new attributes definitions.

#### 1. Declare the attributes definitions

To customize the product records generated by the cartridge, create a
`productAttributesConfig.js` file in this directory.

It has to export an object. The keys of this object are the name of the
attributes in your Algolia records. Each key contains an object with the
following properties:
- `attribute` is the declaration of what data is fetched in SFCC, for each 
  product. It can be:
  - a string that declares a direct Product property. The cartridge tries to
    access it directly and uses the value in the Algolia record. 
  - a function, taking the current product in parameter. What it returns will
    go in the attribute of the Algolia record.
- `localized` (optional) indicates if the attribute is different for each
  locale. It's useful for optimization purposes: when you index multiple
  locales, the cartridge only fetches once the non-localized attributes, and
  use the value in the records generated for each locale.

```ts
{
    attribute: string | (product: dw.catalog.Product) => any;
    localized?: boolean;
}
```

> Note: You can require any B2C Commerce Script class and use it in your functions, e.g.:
> `const PriceBookMgr = require('dw/catalog/PriceBookMgr');`

#### 2. Add the attributes to the list of indexed attributes

Add those attributes to the [Additional Product Attributes](https://www.algolia.com/doc/integration/salesforce-commerce-cloud-b2c/indexing/product-indexing/indexing-attributes/?client=javascript#configure-extra-attributes-for-algoliaproductindex_v2-and-algoliaproductdeltaindex_v2).
